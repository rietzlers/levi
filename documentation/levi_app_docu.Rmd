---
title: "Struktur und Bedienung der App"
author: "Stephan Rietzler"
date: "12/17/2019"
output: 
  html_notebook:
    code_folding: hide
---

```{r include=FALSE}
library(tidyverse)
library(magrittr)
library(zeallot)
library(cowplot)
library(plotly)
library(shiny)
library(janitor)
library(levi)
```

# Dashboard

Zentrales UI zum laden und aufbereiten der Tevi-Datensätze.

* festlegung der heizpulse und abkühlungsphase


# Signal-Analysis

Auswahl eines Signals und Zeitfensters. Bestimmung der dominanten 
Frequenz in diesem Zeitfenster

# Frequenz-Schätzer

Die *Schwingungs-Frequenz* der Kugel kann aus den zur Verfügung stehenden Signalen
auf unterschiedliche Art ermittelt werden: 

* Die zur maximalen Amplitude der Fourier-Koeffizienten gehörende Frequenz.
* Lorentz-Fit and diese Amplituden.

Dabei ist folgendes zu beachten: 

* Das Signal kann vorher aufbereitet werden (Glättung, Mittelung usw. )
* Die Fourier-Koeffizeienten können verschieden berechnet werden:  
ber die Standard-Funktion ```spectrum ``` oder mit   der Funktion ```fft```.

Im folgenden sollen mögliche Methoden an einfachen Beispielen kurz verglichen werden.


# Fit Lorentz to Amps of Fourier-Coefficients

[Lorentz-Kurve](https://de.wikipedia.org/wiki/Lorentzkurve)

Ein gedämpfter harmonischer Oszillator 
\[x(t) = A \cdot e^{-\gamma\cdot t}\cdot e^{i \sqrt{\omega_0^2 - \gamma^2}\cdot t} \] 
gnügt folgender Gleichung:
\[\ddot{x} + 2\gamma \dot{x} + \omega_0^2 x = f(t)\]

Das **Betragsquadrat** der Fourier-Transformierten ist proportional folgendem Term:
\[f(\omega) \sim \frac{A(\omega)}{(\omega^2 - \omega_0^2)^2 + \large(\frac{\gamma}{2}\large)^2\omega^2} \]

Der gefittete Parameter $\omega_0$ ist dann die gesuchte dominante Freq. im gewählten Zeitfenster.



